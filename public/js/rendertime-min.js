"use strict";import countdown from"./countdown-min.js";let firstExamDate={2020:new Date("8 June 2020 9:00 GMT+02:00"),2021:new Date("4 May 2021 9:00 GMT+02:00"),2022:new Date("4 May 2022 9:00 GMT+02:00"),2023:new Date("4 May 2023 9:00 GMT+02:00"),2024:new Date("4 May 2024 9:00 GMT+02:00")};const wFs=[{3:"miesiąc",2:"dzień",1:"godzina",0:"minuta",4:"sekunda"},{3:"miesiące",2:"dni",1:"godziny",0:"minuty",4:"sekundy"},{3:"miesięcy",2:"dni",1:"godzin",0:"minut",4:"sekund"}],zostacForms=[{0:"został"},{0:"zostały"},{0:"zostało"}];let chUnits=(e,t,s)=>{s.preventDefault(),unit=t,document.querySelector(".checked").classList.remove("checked"),e.classList.add("checked"),document.title=`Ile zostało ${wFs[2][t]} do matury ${selYear}? - DniDoMatury.pl`,2!==t&&2020!==selYear?history.pushState({},"",`/${wFs[1][t]}/${selYear}`):2!==t?history.pushState({},"","/"+wFs[1][t]):2020!==selYear?history.pushState({},"","/"+selYear):history.pushState({},"","/"),timVal(t,getUnits(t)),setTimer()},chYear=(e,t)=>{selYear=e,document.title=`Ile zostało ${wFs[2][t]} do matury ${selYear}? - DniDoMatury.pl`,2!==t&&2020!==selYear?history.pushState({},"",`/${wFs[1][t]}/${selYear}`):2!==t?history.pushState({},"","/"+wFs[1][t]):2020!==selYear?history.pushState({},"","/"+selYear):history.pushState({},"","/"),setTimer();let s=2020===e?" 8 czerwca":" 4 maja",r=2020===e?" 29 czerwca":" 22 maja";document.querySelector("body > main > article > h2:nth-child(1) > b:nth-child(1)").innerHTML=s,document.querySelector("body > main > article > h2:nth-child(1) > b:nth-child(2)").innerHTML=r,2020===selYear?(document.querySelectorAll("body > header > nav > a")[0].href="/miesiące",document.querySelectorAll("body > header > nav > a")[1].href="/",document.querySelectorAll("body > header > nav > a")[2].href="/godziny",document.querySelectorAll("body > header > nav > a")[3].href="/minuty"):(document.querySelectorAll("body > header > nav > a")[0].href="/miesiące/"+selYear,document.querySelectorAll("body > header > nav > a")[1].href="/"+selYear,document.querySelectorAll("body > header > nav > a")[2].href="/godziny/"+selYear,document.querySelectorAll("body > header > nav > a")[3].href="/minuty/"+selYear)};document.querySelector("#months").addEventListener("click",e=>chUnits(document.querySelector("#months"),3,e)),document.querySelector("#days").addEventListener("click",e=>chUnits(document.querySelector("#days"),2,e)),document.querySelector("#hours").addEventListener("click",e=>chUnits(document.querySelector("#hours"),1,e)),document.querySelector("#minutes").addEventListener("click",e=>chUnits(document.querySelector("#minutes"),0,e)),document.getElementById("year-select").addEventListener("change",()=>chYear(parseInt(document.getElementById("year-select").value,10),unit));const wF=(e,t,s)=>1===e?t[0][s]:(e>21||e<5)&&e%10>1&&e%10<5?t[1][s]:t[2][s],allUnits=[countdown.MONTHS,countdown.DAYS,countdown.HOURS,countdown.MINUTES,countdown.SECONDS],getUnits=e=>(3===e?allUnits:2===e?allUnits.slice(1):1===e?allUnits.slice(2):0===e?allUnits.slice(3):[]).reduce((e,t)=>e+t,0);let prevCd=[,,],prevYear=0;const mainDOM=document.querySelector("#timer > #mainUnit"),subDOM=document.querySelector("#timer > #subUnits"),timHeader=document.querySelector("#timer > h2"),setTimer=e=>{let t=timVal(unit,getUnits(unit));if(prevCd[1]!==t[1]){let e=t[1];subDOM.innerHTML=e,subDOM.setAttribute("value",e)}if(prevCd[0]!==t[0]){let e=t[0];mainDOM.innerHTML=e,mainDOM.setAttribute("value",e),prevCd[2]===t[2]&&prevYear===selYear||(timHeader.innerHTML=`Do matury ${selYear} ${t[2]}`)}prevCd=t,prevYear=selYear},timVal=(e,t)=>{let s,r,n,a=countdown(firstExamDate[selYear],null,t,3);switch(e){case 3:n=wF(a.months,zostacForms,0),s=`${a.months} ${wF(a.months,wFs,3)} `,r=`${a.days} ${wF(a.days,wFs,2)} i ${a.hours} ${wF(a.hours,wFs,1)}`;break;case 2:n=wF(a.days,zostacForms,0),s=`${a.days} ${wF(a.days,wFs,2)} `,r=`${a.hours} ${wF(a.hours,wFs,1)} i ${a.minutes} ${wF(a.minutes,wFs,0)}`;break;case 1:n=wF(a.hours,zostacForms,0),s=`${a.hours} ${wF(a.hours,wFs,1)} `,r=`${a.minutes} ${wF(a.minutes,wFs,0)} i ${a.seconds} ${wF(a.seconds,wFs,4)}`;break;case 0:n=wF(a.minutes,zostacForms,0),s=`${a.minutes} ${wF(a.minutes,wFs,0)} `,r=`${a.seconds} ${wF(a.seconds,wFs,4)}`}return[s,r,n]};setTimer(),setInterval(()=>{setTimer()},1e3);