"use strict";import countdown from"./countdown-min.js";let firstExamDate={2020:new Date("8 June 2020 9:00 GMT+02:00"),2021:new Date("4 May 2021 9:00 GMT+02:00"),2022:new Date("4 May 2022 9:00 GMT+02:00"),2023:new Date("4 May 2023 9:00 GMT+02:00"),2024:new Date("4 May 2024 9:00 GMT+02:00")};const wordForms=[{3:"miesiąc",2:"dzień",1:"godzina",0:"minuta",4:"sekunda"},{3:"miesiące",2:"dni",1:"godziny",0:"minuty",4:"sekundy"},{3:"miesięcy",2:"dni",1:"godzin",0:"minut",4:"sekund"}],zostacForms=[{0:"został"},{0:"zostały"},{0:"zostało"}];let changeUnits=(e,o,r)=>{r.preventDefault(),mainUnitType=o,document.querySelector(".checked").classList.remove("checked"),e.classList.add("checked"),document.title=`Ile ${wordForms[2][o]} zostało do matury ${choosenYear} - DniDoMatury.pl`,2!==o&&2020!==choosenYear?history.pushState({},"",`/${wordForms[1][o]}/${choosenYear}`):2!==o?history.pushState({},"","/"+wordForms[1][o]):2020!==choosenYear?history.pushState({},"","/"+choosenYear):history.pushState({},"","/"),getTimersValues(o,getUnits(o)),setTimer()},changeYear=(e,o)=>{choosenYear=e,document.title=`Ile ${wordForms[2][o]} zostało do matury ${choosenYear} - DniDoMatury.pl`,2!==o&&2020!==choosenYear?history.pushState({},"",`/${wordForms[1][o]}/${choosenYear}`):2!==o?history.pushState({},"","/"+wordForms[1][o]):2020!==choosenYear?history.pushState({},"","/"+choosenYear):history.pushState({},"","/"),setTimer();let r=2020===e?" 8 czerwca":" 4 maja",t=2020===e?" 29 czerwca":" 22 maja";document.querySelector("body > main > article > h2:nth-child(1) > b:nth-child(1)").innerHTML=r,document.querySelector("body > main > article > h2:nth-child(1) > b:nth-child(2)").innerHTML=t,2020===choosenYear?(document.querySelectorAll("body > header > nav > a")[0].href="/miesiące",document.querySelectorAll("body > header > nav > a")[1].href="/",document.querySelectorAll("body > header > nav > a")[2].href="/godziny",document.querySelectorAll("body > header > nav > a")[3].href="/minuty"):(document.querySelectorAll("body > header > nav > a")[0].href="/miesiące/"+choosenYear,document.querySelectorAll("body > header > nav > a")[1].href="/"+choosenYear,document.querySelectorAll("body > header > nav > a")[2].href="/godziny/"+choosenYear,document.querySelectorAll("body > header > nav > a")[3].href="/minuty/"+choosenYear)};document.querySelector("#months").addEventListener("click",e=>changeUnits(document.querySelector("#months"),3,e)),document.querySelector("#days").addEventListener("click",e=>changeUnits(document.querySelector("#days"),2,e)),document.querySelector("#hours").addEventListener("click",e=>changeUnits(document.querySelector("#hours"),1,e)),document.querySelector("#minutes").addEventListener("click",e=>changeUnits(document.querySelector("#minutes"),0,e)),document.getElementById("year-select").addEventListener("change",()=>changeYear(parseInt(document.getElementById("year-select").value,10),mainUnitType));const chooseWordForm=(e,o,r)=>1===e?o[0][r]:(e>21||e<5)&&e%10>1&&e%10<5?o[1][r]:o[2][r],allUnits=[countdown.MONTHS,countdown.DAYS,countdown.HOURS,countdown.MINUTES,countdown.SECONDS],getUnits=e=>(3===e?allUnits:2===e?allUnits.slice(1):1===e?allUnits.slice(2):0===e?allUnits.slice(3):[]).reduce((e,o)=>e+o,0);let previousCountdown=[,,],previousYear=0;const mainUnitDOM=document.querySelector("#timer > #mainUnit"),subUnitsDOM=document.querySelector("#timer > #subUnits"),timerHeader=document.querySelector("#timer > h2"),setTimer=e=>{let o=getTimersValues(mainUnitType,getUnits(mainUnitType));if(previousCountdown[1]!==o[1]){let e=o[1];subUnitsDOM.innerHTML=e,subUnitsDOM.setAttribute("value",e)}if(previousCountdown[0]!==o[0]){let e=o[0];mainUnitDOM.innerHTML=e,mainUnitDOM.setAttribute("value",e),previousCountdown[2]===o[2]&&previousYear===choosenYear||(timerHeader.innerHTML=`Do matury ${choosenYear} ${o[2]}`)}previousCountdown=o,previousYear=choosenYear},getTimersValues=(e,o)=>{let r,t,s,n=countdown(firstExamDate[choosenYear],null,o,3);switch(e){case 3:s=chooseWordForm(n.months,zostacForms,0),r=`${n.months} ${chooseWordForm(n.months,wordForms,3)} `,t=`${n.days} ${chooseWordForm(n.days,wordForms,2)} i ${n.hours} ${chooseWordForm(n.hours,wordForms,1)}`;break;case 2:s=chooseWordForm(n.days,zostacForms,0),r=`${n.days} ${chooseWordForm(n.days,wordForms,2)} `,t=`${n.hours} ${chooseWordForm(n.hours,wordForms,1)} i ${n.minutes} ${chooseWordForm(n.minutes,wordForms,0)}`;break;case 1:s=chooseWordForm(n.hours,zostacForms,0),r=`${n.hours} ${chooseWordForm(n.hours,wordForms,1)} `,t=`${n.minutes} ${chooseWordForm(n.minutes,wordForms,0)} i ${n.seconds} ${chooseWordForm(n.seconds,wordForms,4)}`;break;case 0:s=chooseWordForm(n.minutes,zostacForms,0),r=`${n.minutes} ${chooseWordForm(n.minutes,wordForms,0)} `,t=`${n.seconds} ${chooseWordForm(n.seconds,wordForms,4)}`}return[r,t,s]};setTimer(),setInterval(()=>{setTimer()},1e3);